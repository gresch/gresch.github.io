<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>gresch - adventures in data science</title>
    <link>/index.xml</link>
    <description>Recent content on gresch - adventures in data science</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>gresch</copyright>
    <lastBuildDate>Tue, 17 Jan 2017 11:13:14 -0500</lastBuildDate>
    <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>A brief analysis of available open data on Oktoberfest in Munich, Germany from 1985 until 2015</title>
      <link>/2017/01/17/201701oktoberfest1985-2015/</link>
      <pubDate>Tue, 17 Jan 2017 11:13:14 -0500</pubDate>
      
      <guid>/2017/01/17/201701oktoberfest1985-2015/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/M%C3%BCnchen%2C_L%C3%B6wenbr%C3%A4u-Festhalle%2C_Oktoberfest_2012_%2803%29.jpg/1200px-M%C3%BCnchen%2C_L%C3%B6wenbr%C3%A4u-Festhalle%2C_Oktoberfest_2012_%2803%29.jpg&#34; alt=&#34;München, Löwenbräu-Festhalle, Oktoberfest 2012 (03).jpg, CC BY 3.0&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;München, Löwenbräu-Festhalle, Oktoberfest 2012 (03).jpg, &lt;a href=&#34;http://creativecommons.org/licenses/by/3.0&#34; title=&#34;Creative Commons Attribution 3.0&#34;&gt;CC BY 3.0&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;Who does not know it, the &lt;strong&gt;Oktoberfest&lt;/strong&gt; in Munich, Germany, or at least heard about it? In this brief analysis I would like to show some statistics and data visualizations about the &lt;strong&gt;Oktoberfest&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;My motivation to perform the analysis is firstly to explore an interesting data set, but also to test my hopefully new &lt;em&gt;publishing workflow&lt;/em&gt; involving (1) R Notebook and (2) &lt;a href=&#34;https://github.com/rstudio/blogdown&#34;&gt;blogdown&lt;/a&gt;. One goal is to make the analysis available on &lt;a href=&#34;https://github.com/gresch&#34;&gt;GitHub&lt;/a&gt; and also use the same file for a &lt;a href=&#34;https://gresch.github.io/&#34;&gt;Blog post&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;setup-and-data-overview&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Setup and data overview&lt;/h1&gt;
&lt;p&gt;The data is an open data set from the &lt;a href=&#34;https://www.opengov-muenchen.de/dataset/oktoberfest/resource/e0f664cf-6dd9-4743-bd2b-81a8b18bd1d2&#34;&gt;Munich Opendata portal&lt;/a&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# load the tidyverse and other libraries
library(&amp;quot;tidyverse&amp;quot;)
library(&amp;quot;knitr&amp;quot;)
library(&amp;quot;scales&amp;quot;)
library(&amp;quot;ggthemes&amp;quot;)


# constants
data_file &amp;lt;- &amp;#39;https://www.opengov-muenchen.de/dataset/8d6c8251-7956-4f92-8c96-f79106aab828/resource/e0f664cf-6dd9-4743-bd2b-81a8b18bd1d2/download/oktoberfestgesamt19852015.csv&amp;#39;
r_90_d &amp;lt;- theme(axis.text.x = element_text(angle = 90, hjust = 1))
caption &amp;lt;- &amp;quot;https://gresch.github.io/&amp;quot;
my_theme &amp;lt;- theme_hc() 
cp &amp;lt;- c(&amp;quot;#1d3a7b&amp;quot;, &amp;quot;#b53fa8&amp;quot;, &amp;quot;#224dce&amp;quot;, &amp;quot;#529480&amp;quot;, &amp;quot;#23f2c0&amp;quot;) # color palette &amp;quot;Song of the Unexpected Color Palette&amp;quot; http://www.color-hex.com/color-palette/29752&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# load the data
data &amp;lt;- read_csv(data_file)

# translate variable names to English

data &amp;lt;- rename(data, year = jahr, 
               duration_days = dauer,
               visitor_year = besucher_gesamt, 
               visitor_day = besucher_tag, 
               beer_price = bier_preis,
               beer_sold = bier_konsum,
               chicken_price = hendl_preis,
               chicken_sold = hendl_konsum)

# unify measures

data$visitor_year &amp;lt;- data$visitor_year * 1000000
data$visitor_day &amp;lt;- data$visitor_day * 1000
data$beer_sold &amp;lt;- data$beer_sold * 100&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# create table overview
kable(summary(data))&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;year&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;duration_days&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;visitor_year&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;visitor_day&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;beer_price&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;beer_sold&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;chicken_price&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;chicken_sold&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :1985&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Min. :16.00&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :5500000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :344000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. : 3.200&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :4869800&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Min. : 3.920&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :351705&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:1992&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1st Qu.:16.00&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:6050000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:369000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.: 4.565&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:5236500&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;1st Qu.: 5.180&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:491136&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :2000&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Median :16.00&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :6400000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :394000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median : 6.350&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :5761400&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Median : 7.850&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :595580&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :2000&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Mean :16.23&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :6341935&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :391129&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean : 6.323&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :6053368&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Mean : 7.080&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :590713&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:2008&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3rd Qu.:16.00&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:6550000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:406000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.: 8.050&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:6752650&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3rd Qu.: 8.965&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:698850&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :2015&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Max. :18.00&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :7100000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :444000&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :10.270&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :7922500&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Max. :11.100&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :807710&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The data set spans 31 years (31 observations) and eight variables that include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;strong&gt;year&lt;/strong&gt; of the Oktoberfest&lt;/li&gt;
&lt;li&gt;The duration of the fest in days (&lt;strong&gt;duration_days&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Visitors for each year (&lt;strong&gt;visitor_year&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Mean visitors per day for each year (&lt;strong&gt;visitor_day&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Mean price for one beer (1 Liter) for each year (&lt;strong&gt;beer_price&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Whole amount of beer sold for each year in Liter (&lt;strong&gt;beer_sold&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Mean price for one chicken for each year (&lt;strong&gt;chicken_price&lt;/strong&gt;)&lt;/li&gt;
&lt;li&gt;Whole amount of chickens sold for each year (&lt;strong&gt;chicken_sold&lt;/strong&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;data-exploration-and-analysis&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Data exploration and analysis&lt;/h1&gt;
&lt;p&gt;I explore the observations of some of the variables mentioned above to get a better understanding of the data. Usually, &lt;em&gt;histograms&lt;/em&gt; are a perfect tool to explore data’s distribution and to find out interesting details. In this analysis I show how the data progressed over the years &lt;em&gt;1986-2015&lt;/em&gt; using a &lt;em&gt;barchart&lt;/em&gt;.&lt;/p&gt;
&lt;div id=&#34;visitors-per-year&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Visitors per year&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# show visitors per year
ggplot(data) + 
  geom_bar(aes(year, visitor_year), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[1]) + 
  labs(
    title = &amp;quot;Number of visitors to the Oktoberfest vary and are currently in decline&amp;quot;,
    subtitle = &amp;quot;Number of visitors to the Oktoberfest&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Visitors per year&amp;quot;
    ) +
  scale_y_continuous(
    labels = scales::comma, 
    limits = c(0, 8000000),
    breaks = seq(0, 8000000, by = 1000000)) +
  scale_x_continuous(breaks = seq(1985, 2015, by = 1)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;3000&#34; /&gt; Over the 31 years, on average, 6,341,935 people visited the Oktoberfest each year. What is interesting to note is that there was a major decline in visitors just after &lt;strong&gt;9/11&lt;/strong&gt; in year 2001 – Oktoberfest starts usually end of September each year. The trend of yearly visitors looks the same as for the average daily visitors.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# show divergence of visitors per year from the mean
ggplot(data) + 
  geom_bar(aes(year, visitor_year - mean(visitor_year)), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[1]) + 
  labs(
    title = &amp;quot;Number of visitors to the Oktoberfest vary and are currently in decline&amp;quot;,
    subtitle = &amp;quot;Divergence of visitors compared to the mean &amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Divergence from mean visitors per year&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::comma, 
    limits = c(-1000000, 1000000),
    breaks = seq(-1000000, 1000000, by = 100000)
    ) +
  scale_x_continuous(
    breaks = seq(1985, 2015, by = 1)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;3000&#34; /&gt; In this graph it is even better to see that in 1985 the most people visited the Oktoberfest. Then there is a stark decline of visitors with 1988 hitting the bottom with ~600,000 visitors less than average. After that the number of visitors increased until 2001 or &lt;strong&gt;nine-eleven&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;beer-price-development&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Beer price development&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# show beer price development
ggplot(data) + 
  geom_bar(aes(year, beer_price), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[2]) + 
  labs(
    title = &amp;quot;Oktoberfest beer price increases 0.23 € per year, on average&amp;quot;,
    subtitle = &amp;quot;Overview of beer price development -- Oktoberfest&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Price for one liter beer&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::dollar_format(suffix = &amp;quot;€&amp;quot;, prefix = &amp;quot;&amp;quot;), 
    limits = c(0, 11.5), 
    breaks = seq(0, 11.5, by = 0.5)) +
  scale_x_continuous(
    breaks = seq(1985, 2015, by = 1)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;3000&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Not surprisingly, the beer price increased over the years. starting in 1985 with 3.20€ and hitting 10.75€ in 2015. That would be an average yearly increase of &lt;span class=&#34;math display&#34;&gt;\[(10.27 - 3.20) / 30 = 0.2356667\]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# show beer price increase based on former year
data %&amp;gt;%
  mutate(increase = beer_price - lag(beer_price, default = NA)) %&amp;gt;%
  ggplot() + 
  geom_bar(aes(year, increase), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[2]) + 
  labs(
    title = &amp;quot;There were steep beer price increases in 1991, 2000, 2007, and 2008 compared to the former years&amp;quot;,
    subtitle = &amp;quot;Beer price increase compared to former year -- Oktoberfest&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Beer price increase compared to year before&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::dollar_format(suffix = &amp;quot;€&amp;quot;, prefix = &amp;quot;&amp;quot;), 
    breaks = seq(-10, +10, by = 0.05)) +
  scale_x_continuous(
    breaks = seq(1985, 2016, by = 1), 
    limits = c(1985, 2016)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;3000&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Interestingly, in 1991 there was, on average, a major increase of 0.44€ per beer compared to 1990. Why would that be? The following years the increase levels off until 1996 to rise again with the year 2000 showing a major increase of 0.55€ compared to 1999, which is more than double than the average increase over time.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;beer-sold-over-the-years&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Beer sold over the years&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(data) + 
  geom_bar(aes(year, beer_sold / duration_days), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[3]) + 
  labs(
    title = &amp;quot;Regardless of fewer visitors in recent years, the amount of sold beer is higher than in the nineties&amp;quot;,
    subtitle = &amp;quot;Overview of beer sold in Liter per day, on average -- Oktoberfest&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Beer sold per day (Liter)&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::comma, 
    breaks = seq(0, 500000, by = 50000)) +
  scale_x_continuous(
    breaks = seq(1985, 2016, by = 1), 
    limits = c(1985, 2016)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;3000&#34; /&gt;&lt;/p&gt;
&lt;p&gt;On average, each year on each day 372,837 liters of beer was sold. The bar chart looks multimodel with a peak in 1999 and a low in 2001 (where less people visited the Oktoberfest). Since then, the amount of beer sold is increasing.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(data) + 
  geom_bar(aes(year, beer_sold / duration_days / visitor_day), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[3]) + 
  labs(
    title = &amp;quot;On average, Oktoberfest visitors drink more beer -- over 1.2 Liter in 2015&amp;quot;,
    subtitle = &amp;quot;Overview of beer sold in Liter per day per visitor, on average&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Beer sold per day (Liter)&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::comma, 
    breaks = seq(0, 1.5, by = 0.1)) +
  scale_x_continuous(
    breaks = seq(1985, 2015, by = 1), 
    limits = c(1984, 2016)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;3000&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;chicken-price-development&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Chicken price development&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# show Chicken price development
ggplot(data) + 
  geom_bar(aes(year, chicken_price), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[4]) + 
  labs(
    title = &amp;quot;Oktoberfest chicken price increases over the years with a steep increase in 2000&amp;quot;,
    subtitle = &amp;quot;Overview of chicken price&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Chicken price&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::dollar_format(suffix = &amp;quot;€&amp;quot;, prefix = &amp;quot;&amp;quot;), 
    limits = c(0, 11.5), 
    breaks = seq(0, 11.5, by = 1)) +
  scale_x_continuous(
    breaks = seq(1985, 2015, by = 1)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;3000&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The chicken price increased over the years until 1995 to fall slightly. However a huge increase was in the year 2000. The price was increased by 2.47€ more than twelve times the average price increase. Starting in 1985 with 4.77€ and hitting 10.75€ in 2015. That would be an average yearly increase of &lt;span class=&#34;math display&#34;&gt;\[(10.75 - 4.77) / 30 = 0.199333\]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# show chicken price increase based on former year
data %&amp;gt;%
  mutate(increase = chicken_price - lag(chicken_price, default = NA)) %&amp;gt;%
  ggplot() + 
  geom_bar(aes(year, increase), 
           stat = &amp;quot;identity&amp;quot;,
           fill = cp[4]) + 
  labs(
    title = &amp;quot;Oktoberfest chicken price increased 46% in the year 2000&amp;quot;,
    subtitle = &amp;quot;Overview of chicken price compared to year before&amp;quot;,
    caption = caption,
    x = &amp;quot;Year&amp;quot;,
    y = &amp;quot;Chicken price increase compared to year before&amp;quot;
  ) +
  scale_y_continuous(
    labels = scales::dollar_format(suffix = &amp;quot;€&amp;quot;, prefix = &amp;quot;&amp;quot;), 
    breaks = seq(-10, +10, by = 0.25)) +
  scale_x_continuous(
    breaks = seq(1985, 2016, by = 1), 
    limits = c(1984, 2016)) + 
  r_90_d + my_theme&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201701Oktoberfest1985-2015_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;3000&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Interestingly, in 1986 the price for chicken dropped four times the average with then a steady increase until 1986. Then in the year 2000 the aforementioned rise of 2.47€. Also, in 2013 we saw a major price increase compared to 2012, namely 1.03€.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;conlusion&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Conlusion&lt;/h1&gt;
&lt;p&gt;This was an analysis of available data of the Oktoberfest by &lt;a href=&#34;https://www.opengov-muenchen.de/dataset/oktoberfest/resource/e0f664cf-6dd9-4743-bd2b-81a8b18bd1d2&#34;&gt;Munich Opendata portal&lt;/a&gt;. In brief I learned that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the total numbers of visitors are in decline&lt;/li&gt;
&lt;li&gt;in the years were terrorism attacks happened the visitors dropped, esp. in 2001&lt;/li&gt;
&lt;li&gt;the price for one Liter of beer increases, esp. in the year 2000 with an increase of 0.55€&lt;/li&gt;
&lt;li&gt;the total amount of beer sold increases&lt;/li&gt;
&lt;li&gt;alarmingly, the amount of beer per visitor also increases after 1997; on average on visitor drinks over 1.2 liters of beer per day&lt;/li&gt;
&lt;li&gt;the price for chicken doubled compared to 1999&lt;/li&gt;
&lt;li&gt;that there was a 46% price increase for a chicken in the year 2000!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Of course this analysis is limited by the amount of data available for such analyses. Averaging over already aggregated data allow limited insights and statistics need to be interpreted carefully.&lt;/p&gt;
&lt;p&gt;From an approach to data science (or data analysis with R) I learned that&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;even well structured (ggplot) code can get messy&lt;/li&gt;
&lt;li&gt;an interesting question to begin with would streamline the analysis&lt;/li&gt;
&lt;li&gt;I am a long cry away from &lt;em&gt;story telling with data&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;I was unsuccessful to globally set figure width in the R Notebook&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you have any feedback on the analysis, the approach or tools, please feel free to contact me.&lt;/p&gt;
&lt;/div&gt;


&lt;!-- BLOGDOWN-HEAD




/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
    <item>
      <title>gganimate - Packages functionality examples using Gapminder data</title>
      <link>/2016/11/22/201611_gganimate_packages_functionality_examples_using_gapminder_data/</link>
      <pubDate>Tue, 22 Nov 2016 21:13:14 -0500</pubDate>
      
      <guid>/2016/11/22/201611_gganimate_packages_functionality_examples_using_gapminder_data/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;p&gt;I recently found an interesting R package that animates &lt;strong&gt;ggplot2&lt;/strong&gt; plots, namely &lt;a href=&#34;https://github.com/dgrtwo/gganimate&#34;&gt;gganimate&lt;/a&gt;. This &lt;a href=&#34;http://rmarkdown.rstudio.com/r_notebooks.html&#34;&gt;notebook&lt;/a&gt; shows some functionalities of it, solely for learning purposes. As a test data set I use &lt;a href=&#34;https://www.gapminder.org/data/&#34;&gt;gapminder&lt;/a&gt; like in the examples of the gganimate package. Nevertheless, I am interested, whether it would support in me in these areas_&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Data analysis, i.e., does it help to generate insights more efficiently?&lt;/li&gt;
&lt;li&gt;Data visualization, i.e., does it help to better communicate findings?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This notebook is organized as follows: &lt;strong&gt;Setup&lt;/strong&gt;, first I show necessary software and settings as well as give an data overview. In &lt;strong&gt;Non-animated plots&lt;/strong&gt; I show some plots that I would create in order to assess the data without any animation for a later comparison. In section &lt;strong&gt;Animated plots&lt;/strong&gt; I try &lt;strong&gt;gganimate&lt;/strong&gt; to create animated plots. I conclude in the last section &lt;strong&gt;Conclusion&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Contact: &lt;a href=&#34;https://twitter.com/gre__sch&#34;&gt;gresch&lt;/a&gt;&lt;/p&gt;
&lt;div id=&#34;setup&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Setup&lt;/h1&gt;
&lt;div id=&#34;software&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Software&lt;/h3&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Install R&lt;/li&gt;
&lt;li&gt;Install RStudio&lt;/li&gt;
&lt;li&gt;Install &lt;a href=&#34;https://www.imagemagick.org/script/binary-releases.php&#34;&gt;ImageMagick&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Install &lt;em&gt;gganimate&lt;/em&gt; via &lt;code&gt;devtools::install_github(&amp;quot;dgrtwo/gganimate&amp;quot;)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div id=&#34;libraries&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Libraries&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(gganimate)       # animation package
library(ggplot2)         # plotting package
library(gapminder)       # package with data to visualize
library(dplyr)           # package for data transformation&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;settings&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Settings&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;theme_set(theme_bw())    # set theme to black and white&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data-overview&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Data overview&lt;/h3&gt;
&lt;p&gt;The data is an &lt;em&gt;excerpt of the Gapminder data on life expectancy, GDP per capita, and population by country.&lt;/em&gt; It includes 1704 observations with six variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;country&lt;/li&gt;
&lt;li&gt;continent&lt;/li&gt;
&lt;li&gt;year&lt;/li&gt;
&lt;li&gt;lifeExp&lt;/li&gt;
&lt;li&gt;pop&lt;/li&gt;
&lt;li&gt;gdpPerCap&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::kable(summary(gapminder))&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;country&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;continent&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;year&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;lifeExp&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;pop&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;gdpPercap&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Afghanistan: 12&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Africa :624&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :1952&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :23.60&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. :6.001e+04&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Min. : 241.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Albania : 12&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Americas:300&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:1966&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:48.20&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.:2.794e+06&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;1st Qu.: 1202.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Algeria : 12&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Asia :396&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :1980&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :60.71&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median :7.024e+06&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Median : 3531.8&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Angola : 12&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Europe :360&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :1980&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :59.47&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean :2.960e+07&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Mean : 7215.3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Argentina : 12&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Oceania : 24&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:1993&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:70.85&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.:1.959e+07&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3rd Qu.: 9325.5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Australia : 12&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :2007&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :82.60&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :1.319e+09&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Max. :113523.1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;(Other) :1632&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;NA&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;NA&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;knitr::kable(head(gapminder, 15))&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;country&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;continent&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;year&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;lifeExp&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;pop&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;gdpPercap&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1952&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;28.801&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;8425333&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;779.4453&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1957&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;30.332&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;9240934&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;820.8530&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1962&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;31.997&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;10267083&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;853.1007&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1967&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;34.020&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;11537966&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;836.1971&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1972&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;36.088&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;13079460&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;739.9811&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1977&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;38.438&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;14880372&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;786.1134&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1982&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;39.854&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;12881816&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;978.0114&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1987&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;40.822&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;13867957&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;852.3959&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1992&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;41.674&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;16317921&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;649.3414&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1997&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;41.763&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;22227415&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;635.3414&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2002&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;42.129&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;25268405&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;726.7341&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Afghanistan&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Asia&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2007&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;43.828&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;31889923&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;974.5803&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Albania&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Europe&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1952&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;55.230&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1282697&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1601.0561&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Albania&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Europe&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1957&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;59.280&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1476505&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1942.2842&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;Albania&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Europe&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1962&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;64.820&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;1728137&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;2312.8890&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;non-animated-plots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Non-animated plots&lt;/h1&gt;
&lt;p&gt;Before testing &lt;strong&gt;gganimate&lt;/strong&gt; I will create some plots via &lt;strong&gt;ggplot&lt;/strong&gt;. For this analysis I will concentrate on the relationship between &lt;em&gt;GDP per capita&lt;/em&gt; and &lt;em&gt;life expectancy at birth&lt;/em&gt;. To increase readability, I log10ed the x-axis and used &lt;em&gt;color&lt;/em&gt; to differentiate between observations coming from different &lt;em&gt;continents&lt;/em&gt;. It shows a somewhat positive relationship between these two variables.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(gapminder) +
  geom_point(aes(gdpPercap, lifeExp, color = continent)) + 
  scale_x_log10()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What are &lt;em&gt;possible&lt;/em&gt; ways to look at the &lt;em&gt;development&lt;/em&gt; of these variables over time (e.g., years)? Here are some means:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Scatter plot: use of &lt;code&gt;facet_grid(~year)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Area: Show averages and use &lt;code&gt;facet_grid(~year)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div id=&#34;scatterplot-use-of-facet_gridyear&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Scatterplot: use of &lt;code&gt;facet_grid(~year)&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;It overall shows a positive development of &lt;em&gt;life expectancy&lt;/em&gt; and &lt;em&gt;GDP per capita&lt;/em&gt; over the years, with Europe leading and Africa tailing.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(gapminder) +
  geom_point(aes(gdpPercap, lifeExp, color = continent)) + 
  scale_x_log10() + 
  facet_grid(~year)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;area-show-averages-and-use-facet_gridyear&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Area: Show averages and use &lt;code&gt;facet_grid(~year)&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;This plot also shows a positive development of &lt;em&gt;life expectancy&lt;/em&gt; and &lt;em&gt;GDP per capita&lt;/em&gt; over the years, without showing differentiation for &lt;em&gt;continents&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;gapminder %&amp;gt;%
  group_by(continent, year) %&amp;gt;% 
  summarise(meanLifeExp = round(mean(lifeExp), 0),
            meanGdpPercap = round(mean(gdpPercap), 0)) %&amp;gt;%
  ggplot() +
  geom_area(aes(meanGdpPercap, meanLifeExp), stat = &amp;quot;identity&amp;quot;) +
  scale_x_log10() +
  facet_grid(~year)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;animated-plots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Animated plots&lt;/h1&gt;
&lt;p&gt;The package &lt;strong&gt;gganimate&lt;/strong&gt; gives me another possibility: to have initial plot for every year provided and to display them in a series. In this case the variable &lt;em&gt;year&lt;/em&gt; needs to be set as the &lt;em&gt;frame&lt;/em&gt;.&lt;/p&gt;
&lt;div id=&#34;animated-scatterplot&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Animated scatterplot&lt;/h3&gt;
&lt;p&gt;The animated scatter plot shows me the initial plot (i.e., two variables on the axes and the one variable as color fill). In addition, each frame shows a specific year. Frames change every second. Hence, it is possible to view developments over time.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;&amp;gt; gg_animate(ggplot(gapminder) +
+             geom_point(aes(gdpPercap, lifeExp, color = continent, frame = year)) + 
+             scale_x_log10())&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-2.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-3.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-4.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-5.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-6.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-7.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-8.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-9.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-10.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-11.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-9-12.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;facet_grid(~continent)&lt;/code&gt; further allows now a differentiation on the individual continent developments.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;&amp;gt; gg_animate(ggplot(gapminder) +
+             geom_point(aes(gdpPercap, lifeExp, color = continent, frame = year)) + 
+             scale_x_log10() +
+              facet_grid(~continent)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-2.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-3.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-4.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-5.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-6.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-7.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-8.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-9.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-10.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-11.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-10-12.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;line-chart&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Line chart&lt;/h3&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;&amp;gt; gg_animate(gapminder %&amp;gt;%
+   group_by(continent, year) %&amp;gt;% 
+   summarise(meanLifeExp = round(mean(lifeExp), 0),
+             meanGdpPercap = round(mean(gdpPercap), 0)) %&amp;gt;%
+   ggplot() +
+   geom_line(aes(meanGdpPercap, meanLifeExp, frame = year), stat = &amp;quot;identity&amp;quot;) +
+   scale_x_log10()) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-2.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-3.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-4.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-5.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-6.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-7.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-8.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-9.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-10.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-11.png&#34; width=&#34;672&#34; /&gt;&lt;img src=&#34;#####../content/post/201611_gganimate_Packages_functionality_examples_using_Gapminder_data_files/figure-html/unnamed-chunk-11-12.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;conclusion&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;gganimate&lt;/strong&gt; is an interesting package with some advantages. I will try to use it more often from now on. One open question would be whether it is possible to change &lt;em&gt;width&lt;/em&gt; and &lt;em&gt;height&lt;/em&gt; of the animated plots.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Data analysis, i.e., does it help to generate insights more efficiently?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In terms of data analysis it brings only few benefits. Other plots and means of exploration are available to understand the data, such as histograms, table view, or facet grids.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. Data visualiazation, i.e., does it help to better communicate findings? &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In terms of data visualization I believe &lt;strong&gt;gganimate&lt;/strong&gt; is helpful. The &lt;em&gt;frame&lt;/em&gt; provides another dimension to a plot without the need to use color, sizes, or other means that might clutter the plot. Another advantage is that I can tell a story and its &lt;em&gt;development&lt;/em&gt; over time (or other variable). Lastly, I think adding animation to visualization is much more compelling and people might &lt;em&gt;engange&lt;/em&gt; much more with the plot.&lt;/p&gt;
&lt;/div&gt;


&lt;!-- BLOGDOWN-HEAD




/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
    <item>
      <title>Data Science - R Script to Analyze BPMN Diagrams</title>
      <link>/2016/09/22/201609_datascience_r_script_to_analyze_bpmn_diagrams/</link>
      <pubDate>Thu, 22 Sep 2016 08:42:35 +0200</pubDate>
      
      <guid>/2016/09/22/201609_datascience_r_script_to_analyze_bpmn_diagrams/</guid>
      <description>

&lt;h1 id=&#34;introduction&#34;&gt;Introduction&lt;/h1&gt;

&lt;p&gt;yEd is a modeling tool to model different types of graphs, including BPMN diagrams. Contrary to database-oriented modeling tools, yEd is a file-oriented tool. It saves the diagram in an XML file (GraphML). In case one models diagrams with more than 100 elements, consistency checks and spell checks can become cumbersome and time consuming.&lt;/p&gt;

&lt;p&gt;I prepared an R script that tries to reduce the effort by fetching the names and types of the modeled BPMN elements and make them available as a spreadsheet file. This spreadsheet may support you in the following activities:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Spellcheck&lt;/li&gt;
&lt;li&gt;Check of consistent naming of process activities, business objects, and events&lt;/li&gt;
&lt;li&gt;Process complexity estimation, e.g., based on the number of activities or used gateways&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you are interested to learn more about the R script, do not hesitate to contact me.&lt;/p&gt;

&lt;h1 id=&#34;used-tools&#34;&gt;Used tools&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.yworks.com/en/products_yed_download.html&#34;&gt;yEd - Graph Editor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.rstudio.com/&#34;&gt;RStudio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://products.office.com/en-us/excel&#34;&gt;MS Excel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/gresch/GraphMLBPMNtoSpreadsheet&#34;&gt;Link to the R script&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;process-example&#34;&gt;Process example&lt;/h1&gt;

&lt;p&gt;&lt;img src=&#34;./img/ExampleBPMNDiagram.jpg&#34; alt=&#34;Process example&#34; /&gt;&lt;/p&gt;

&lt;h1 id=&#34;result&#34;&gt;Result&lt;/h1&gt;

&lt;p&gt;&lt;img src=&#34;./img/ExampleBPMNXLS.jpg&#34; alt=&#34;Result&#34; /&gt;
&lt;img src=&#34;./img/ExampleBPMNPivot.jpg&#34; alt=&#34;Result&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>About</title>
      <link>/page/about/</link>
      <pubDate>Thu, 05 May 2016 21:48:51 -0700</pubDate>
      
      <guid>/page/about/</guid>
      <description>&lt;p&gt;Hello. I am a strategy consultant.&lt;/p&gt;

&lt;p&gt;At the same time I am intrigued by Datascience and data visualization in two ways. First I find it incredible interesting what can be learned from data analysis. Second, I realized I enjoy thinking about data, algorithms and to understand the art of visualizing the meaning hidden in data.&lt;/p&gt;

&lt;p&gt;So here I am. I will start with Datascience. I will start this blog to write about my little steps into learning more about it.&lt;/p&gt;

&lt;p&gt;All the best,
gresch&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Exploring years of education and strong opinions on same sex relationships using P-value-analysis</title>
      <link>/2014/10/20/201410_p-value_same_sex_and_education_analysis/</link>
      <pubDate>Mon, 20 Oct 2014 02:13:50 +0000</pubDate>
      
      <guid>/2014/10/20/201410_p-value_same_sex_and_education_analysis/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;This document summarizes my project I did for the Coursera &lt;a href=&#34;https://www.coursera.org/specializations/statistics&#34;&gt;Master Statistics with R&lt;/a&gt; class. I decided to explore the following question: “&lt;strong&gt;Is there a relationship between strong opinions on same sex relationships and years of education?&lt;/strong&gt;”.&lt;/p&gt;
&lt;p&gt;The world changes. And as it changes people and states become more liberal – even when it comes to topics of same sex relationships. A strong belief that same sex relationships are wrong may root in religion or family values. However, as the Economist explains (&lt;a href=&#34;http://www.economist.com/node/17227800?story_id=17227800&#34; class=&#34;uri&#34;&gt;http://www.economist.com/node/17227800?story_id=17227800&lt;/a&gt;), in 1995 fewer than half of Americans (48%) are opposed to gay marriage, while 42% are in favour. Today same sex marriage is legal in more than 30 states in the U.S. (&lt;a href=&#34;http://www.ncsl.org/research/human-services/same-sex-marriage-laws.aspx&#34; class=&#34;uri&#34;&gt;http://www.ncsl.org/research/human-services/same-sex-marriage-laws.aspx&lt;/a&gt;). In regard of this development I find it worthwhile to understand not only the legal adoption of same-sex relationships, but also how the public adopts to the liberation of same sex relationships. While there exist data analyses on opinion on same sex relationships with respect to religion (&lt;a href=&#34;http://www.economist.com/node/17227800?story_id=17227800&#34; class=&#34;uri&#34;&gt;http://www.economist.com/node/17227800?story_id=17227800&lt;/a&gt;) no analysis with respect to years of education exists to the best of my knowledge.&lt;/p&gt;
&lt;p&gt;In the remainder of this chapter I introduce the data set and necessary variables which will be analyzed in order to find an answer to the aforementioned question. Further, I will detail necessary data manipulation steps. In chapter two you find some explorative data analyses and sample statistics to understand data spread and variability. In chapter three I elaborate on analyses that explore a possible relationship between &lt;strong&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/strong&gt; and &lt;strong&gt;VIEW ON HOMOSEXUAL RELATIONS&lt;/strong&gt;. I conclude my project in chapter four.&lt;/p&gt;
&lt;p&gt;If you want to follow up on this project or simply look at the code, please feel free to use the &lt;code&gt;code&lt;/code&gt; button on the top-right corner of this document.&lt;/p&gt;
&lt;div id=&#34;setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Setup&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# load libraries
library(&amp;quot;ggplot2&amp;quot;)
library(&amp;quot;ggthemes&amp;quot;)
library(&amp;quot;RColorBrewer&amp;quot;)
library(&amp;quot;grid&amp;quot;)

# load inference code
source(&amp;quot;http://bit.ly/dasi_inference&amp;quot;)

# load gss data
load(url(&amp;quot;http://bit.ly/dasi_gss_data&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Data&lt;/h2&gt;
&lt;p&gt;For my analysis I rely on the data set &lt;em&gt;General Social Survey (GSS)&lt;/em&gt; (source: &lt;a href=&#34;http://d396qusza40orc.cloudfront.net/statistics/project/gss.Rdata&#34; class=&#34;uri&#34;&gt;http://d396qusza40orc.cloudfront.net/statistics/project/gss.Rdata&lt;/a&gt;). The GSS is a sociological survey used to collect data on demographic characteristics and attitudes of residents of the United States.&lt;/p&gt;
&lt;p&gt;The survey is conducted face-to-face with an in-person interview by the National Opinion Research Center at the University of Chicago, of adults (18+) in randomly selected households. The survey was conducted every year from 1972 to 1994 (except in 1979, 1981, and 1992). Since 1994, it has been conducted every other year. (source: &lt;a href=&#34;http://en.wikipedia.org/wiki/General_Social_Survey&#34; class=&#34;uri&#34;&gt;http://en.wikipedia.org/wiki/General_Social_Survey&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;It is an observational study (survey), where respondents are observed and not exposed to a treatment. The respondents are selected randomly. Scope of inference: This data cannot be used for establishing causal links, since there is no random assignment. Scope of interest: The population of interest are residents of the USA. Generalizability is possible, since the respondents were selected randomly. One possible source of bias could be that randomly selected respondents choose not to respond (non-response) so that the sample is not generalizable anymore. The data set contains 57,061 cases (observations). Each case describes a respondent’s interview result, including 114 statements (variables).&lt;/p&gt;
&lt;p&gt;The two variables of interest are &lt;strong&gt;VIEW ON HOMOSEXUAL RELATIONS&lt;/strong&gt; (categorical) and &lt;strong&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/strong&gt; (numerical).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;data-cleansing&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Data cleansing&lt;/h2&gt;
&lt;p&gt;In order to work with the data, I remove all observations that state a NA for the variable &lt;strong&gt;VIEW ON HOMOSEXUAL RELATIONS&lt;/strong&gt;. My assumption is that the distribution of the variable is the same as for the people who have not preferred to answer (24,272 observations). I removed observations with missing values for &lt;strong&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/strong&gt; in the same manner (75 observations).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# delete all NAs for homosex var
gssNA &amp;lt;- gss[rowSums(is.na(gss[95]))==0,]
# delete all NAs for education var
gssNA &amp;lt;- gssNA[rowSums(is.na(gssNA[8]))==0,]&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Since I am only interested in the &lt;em&gt;strong opinions&lt;/em&gt; on homosexual relations I concentrate on respondents who voted either &lt;em&gt;Always Wrong&lt;/em&gt; or &lt;em&gt;Not Wrong At All&lt;/em&gt; and I ignore respondents with a not strong opinion, e.g., &lt;em&gt;Sometimes Wrong&lt;/em&gt;, &lt;em&gt;Almst Always Wrg&lt;/em&gt; or &lt;em&gt;Other&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Select only the responses of interest
gssNA$strongviewshomosex &amp;lt;- as.character(gssNA$homosex)
gssNA &amp;lt;- gssNA[gssNA$strongviewshomosex != &amp;quot;Sometimes Wrong&amp;quot;,]
gssNA &amp;lt;- gssNA[gssNA$strongviewshomosex != &amp;quot;Almst Always Wrg&amp;quot;,]
gssNA &amp;lt;- gssNA[gssNA$strongviewshomosex != &amp;quot;Other&amp;quot;,]
gssNA$strongviewshomosex &amp;lt;- as.factor(gssNA$strongviewshomosex)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;exploratory-data-analysis&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Exploratory data analysis&lt;/h1&gt;
&lt;p&gt;Before we look into a possible relationship between the two variables I explore each of the variables independently. Since one variable is numerical (&lt;strong&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/strong&gt;) and one is categorical (&lt;strong&gt;OPINION ON HOMOSEXUAL RELATIONS&lt;/strong&gt;) I use different approaches.&lt;/p&gt;
&lt;div id=&#34;highest-year-of-school-completed&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/h2&gt;
&lt;p&gt;This section explores the numerical variable &lt;strong&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/strong&gt; (&lt;em&gt;gssNA$educ&lt;/em&gt;). The summary for the variable shows a mean of 12.6 years and a median of 12 years. The histogram shows a multimodal distribution. The different degrees very likely explain the peaks (multimodality) in the histogram. The second figure shows histograms differentiated by the variable &lt;strong&gt;DEGREE&lt;/strong&gt;. We also know from the summary of the variable that 25% of all respondents – which answered the same sex relationship question – have less or equal than 11 years of education; and 75% have less or equal than 14 years of education. The maximum lies by 20 years of education.&lt;/p&gt;
&lt;p&gt;12 years of education falls into the US high school degree, and hence, I argue that this degree is the most common for US residents. The maximum is 20 years of education, reserved for graduate students.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(gssNA$educ)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    0.00   11.00   12.00   12.56   14.00   20.00&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sd(gssNA$educ)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 3.178399&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The histogram shows a multimodal distribution that is clearly centered at 12 years of education. The multimodality is explained by the respondents different degrees (another GSS variable).&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Create histogram
educhist &amp;lt;- ggplot(gssNA, aes(x = educ)) + geom_histogram(binwidth = 1) + labs(title = &amp;quot;Histogram of HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;, x = &amp;quot;HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;) 
# Create degree histogram
educdegreehist &amp;lt;- ggplot(gssNA, aes(x = educ)) + geom_histogram(binwidth = 1) + facet_wrap(~degree) + labs(title = &amp;quot;Histogram of HIGHEST YEAR OF SCHOOL COMPLETED, separated by degree&amp;quot;, x = &amp;quot;HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;)
# Print both histograms
multiplot(educhist, educdegreehist, cols=2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201410_p-value_same_sex_and_education_analysis_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;strong-opinion-on-homosexual-relations&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Strong OPINION ON HOMOSEXUAL RELATIONS&lt;/h2&gt;
&lt;p&gt;In this section I explore the categorical variable &lt;strong&gt;OPINION ON HOMOSEXUAL RELATIONS&lt;/strong&gt; with the remaining levels &lt;em&gt;Always Wrong&lt;/em&gt; and &lt;em&gt;Not Wrong At All&lt;/em&gt; that I refer to as strong opinions. The summary for the variable shows that the majority of the respondents answered that homosexual relations are &lt;em&gt;Always Wrong&lt;/em&gt; with 21.542 cases and the minority sees it as &lt;em&gt;Not Wrong At All&lt;/em&gt; with 7.271 cases. When we differentiate this by year we see a shift in the distribution of the answers. In 1973 the majority answered with &lt;em&gt;Always Wrong&lt;/em&gt;. This changes over time. In 2010 and 2012 the respondents almost equally answered with either &lt;em&gt;Always Wrong&lt;/em&gt; or &lt;em&gt;Not Wrong At All&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#by(gssNA$strongviewshomosex, gssNA$year, summary)
summary(gssNA$strongviewshomosex)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##     Always Wrong Not Wrong At All 
##            21542             7271&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sd(gssNA$strongviewshomosex)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.4343693&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Create overall barplot
barplotall &amp;lt;- ggplot(gssNA, aes(x = strongviewshomosex)) + geom_bar() + labs(title = &amp;quot;OPINION ON HOMOSEXUAL RELATIONS&amp;quot;, y = &amp;quot;Count&amp;quot;, x = &amp;quot;OPINION ON HOMOSEXUAL RELATIONS&amp;quot;) + coord_flip()
# Create barplot, separated by years
barplotyears &amp;lt;- ggplot(gssNA, aes(x = strongviewshomosex)) + geom_bar() + facet_wrap(~year) + labs(title = &amp;quot;OPINION ON HOMOSEXUAL RELATIONS, differentiated by year&amp;quot;, y = &amp;quot;Count&amp;quot;, x = &amp;quot;OPINION ON HOMOSEXUAL RELATIONS&amp;quot;) + coord_flip()
# Print both histograms
multiplot(barplotall, barplotyears, cols=2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201410_p-value_same_sex_and_education_analysis_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;inference&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Inference&lt;/h1&gt;
&lt;p&gt;After discussing the two variables independently, I use this section to explore the possible relationship between the variables &lt;strong&gt;HIGHEST YEAR OF SCHOOL COMPLETED&lt;/strong&gt; and &lt;strong&gt;OPINION ON HOMOSEXUAL RELATIONS&lt;/strong&gt; (strong opinions).&lt;/p&gt;
&lt;p&gt;By comparing the means (and medians) for each level of &lt;strong&gt;OPINION ON HOMOSEXUAL RELATIONS&lt;/strong&gt; I can see that respondents who view homosexual relationships as &lt;em&gt;Always Wrong&lt;/em&gt; have on average 12.04 years of education, while respondents who view homosexual relationships as &lt;em&gt;Not Wrong At All&lt;/em&gt; have on average 14.12 years of education. The means are also close to their respective medians that indicates not a too skewed distribution&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Determine means and medians for each level
by(gssNA$educ, gssNA$strongviewshomosex, summary)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## gssNA$strongviewshomosex: Always Wrong
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    0.00   11.00   12.00   12.04   14.00   20.00 
## -------------------------------------------------------- 
## gssNA$strongviewshomosex: Not Wrong At All
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    0.00   12.00   14.00   14.12   16.00   20.00&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Create histogram for YEARS OF EDUCATION, separated by views on homosexual relations
plothist &amp;lt;- ggplot(gssNA, aes(x = educ, fill = strongviewshomosex)) + geom_histogram(aes(y=(..density..)), position=&amp;#39;dodge&amp;#39;, binwidth=1) + labs(title = &amp;quot;HISTOGRAM&amp;quot;, x = &amp;quot;HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;, y= &amp;quot;PERCENT&amp;quot;) + theme(legend.position=&amp;quot;bottom&amp;quot;)
# Create boxplot for YEARS OF EDUCATION, separated by views on homosexual relations
plotbox &amp;lt;- ggplot(gssNA, aes(y = educ, x=strongviewshomosex)) + geom_boxplot() + labs(title=&amp;quot;BOXPLOT&amp;quot;, y = &amp;quot;HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;, x = &amp;quot;STRONG OPINION ON HOMOSEXUAL RELATIONS&amp;quot;)
# Create bargraph for YEARS OF EDUCATION, separated by views on homosexual relations
plotallyears &amp;lt;- ggplot(gssNA, aes(x = educ, fill = strongviewshomosex)) + geom_bar(position=&amp;quot;fill&amp;quot;, binwidth = 1) + coord_flip() + labs(title=&amp;quot;DISTRIBUTION FOR ALL YEARS&amp;quot;, x = &amp;quot;HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;, y = &amp;quot;PERCENT&amp;quot;) + theme(legend.position=&amp;quot;bottom&amp;quot;)
# Create bargraph for YEARS OF EDUCATION, separated by views on homosexual relations and only for year 2012
plot2012 &amp;lt;- ggplot(gssNA[gssNA$year == 2012,], aes(x = educ, fill = strongviewshomosex)) + geom_bar(position=&amp;quot;fill&amp;quot;, binwidth = 1) + coord_flip() + labs(title=&amp;quot;DISTRIBUTION FOR 2012&amp;quot;, x = &amp;quot;HIGHEST YEAR OF SCHOOL COMPLETED&amp;quot;, y = &amp;quot;PERCENT&amp;quot;) + theme(legend.position=&amp;quot;bottom&amp;quot;)
# Print plots
multiplot(plothist, plotbox, cols=2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201410_p-value_same_sex_and_education_analysis_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;multiplot(plotallyears, plot2012, cols=2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201410_p-value_same_sex_and_education_analysis_files/figure-html/unnamed-chunk-8-2.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;p&gt;In the following I describe the necessary steps for inference. The project question I want to investigate is :“&lt;em&gt;Is there a relationship between strong opinions on same sex relationships and years of education?&lt;/em&gt;”.&lt;/p&gt;
&lt;div id=&#34;set-the-hypotheses&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Set the hypotheses&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;H0&lt;/strong&gt;: On average, US citizen that find homosexual relationships &lt;em&gt;Not Wrong At All&lt;/em&gt; have the same years of education than US citizen that find homosexual relationships &lt;em&gt;Always Wrong&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HA&lt;/strong&gt;: On average, US citizen that find homosexual relationships &lt;em&gt;Not Wrong At All&lt;/em&gt; have more years of education than US citizen that find homosexual relationships &lt;em&gt;Always Wrong&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;calculate-the-point-estimate-and-standard-error&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Calculate the point estimate and standard error&lt;/h2&gt;
&lt;p&gt;Firstly, I calculate the standard error. To do this, I need the standard error for each level of categorical variable for the education variable. If the conditions are met, I draw the sampling distribution, shade the p-value, and calculate the test statistic. On the basis of the test statistic I make a decision and interpret it in context of the project question.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Determine standard error
by(gssNA$educ, gssNA$strongviewshomosex, sd)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## gssNA$strongviewshomosex: Always Wrong
## [1] 3.096514
## -------------------------------------------------------- 
## gssNA$strongviewshomosex: Not Wrong At All
## [1] 2.895745&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Calculating the standard error for comparing two means follows this formula:&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[SE = \sqrt{\frac{s_{1}^{2}}{n_{1}}+\frac{s_{2}^{2}}{n_{2}}}\]&lt;/span&gt; &lt;span class=&#34;math display&#34;&gt;\[SE = \sqrt{\frac{2.8957^{2}}{7271}+\frac{3.0965^{2}}{21542}} = SE = \sqrt{\frac{8.38507849}{7271}+\frac{9.58831225}{21542}}\]&lt;/span&gt; &lt;span class=&#34;math display&#34;&gt;\[SE = \sqrt{0.00115322218264337780222802915692+0.00044509851685080308235075666140563}\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[SE = 0.03997900323287438946824542558142\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Secondly, I calculate the point estimate (mean). To do so, I need to determine the mean for each level of categorical variable for the education variable.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#Determine mean
by(gssNA$educ, gssNA$strongviewshomosex, mean)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## gssNA$strongviewshomosex: Always Wrong
## [1] 12.03811
## -------------------------------------------------------- 
## gssNA$strongviewshomosex: Not Wrong At All
## [1] 14.11993&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[Z = \frac{point estimate - null value}{SE}\]&lt;/span&gt; &lt;span class=&#34;math display&#34;&gt;\[Z = \frac{14.1199-12.0381}{0.03997900323287438946824542558142} = 52.072\]&lt;/span&gt; I use a significance level of 0.05.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;check-conditions&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Check conditions&lt;/h2&gt;
&lt;p&gt;After determining the standard error and the point estimate, I check the conditions in order to apply the inference method.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Independence within groups: The GSS survey is conducted face-to-face with an in-person interview by the National Opinion Research Center at the University of Chicago, of adults (18+) in randomly selected households. Hence, this condition is met.&lt;/li&gt;
&lt;li&gt;Independence between groups: The observations are not paired data and hence independent. This condition is met.&lt;/li&gt;
&lt;li&gt;Sample size/ skew: Each sample size is larger than 30 observations. &lt;span class=&#34;math display&#34;&gt;\[n_{Always Wrong} = 21542\]&lt;/span&gt; and &lt;span class=&#34;math display&#34;&gt;\[n_{Not Wrong At All} = 7271\]&lt;/span&gt;. This condition is met.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;draw-sampling-distribution-shade-p-value-calculate-test-statistic&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Draw sampling distribution, shade p-value, calculate test statistic&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;inference(gssNA$educ, gssNA$strongviewshomosex, est=&amp;quot;mean&amp;quot;, type=&amp;quot;ht&amp;quot;, method=&amp;quot;theoretical&amp;quot;, alternative=&amp;quot;greater&amp;quot;, null=0, order=c(&amp;quot;Not Wrong At All&amp;quot;, &amp;quot;Always Wrong&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Response variable: numerical, Explanatory variable: categorical
## Difference between two means
## Summary statistics:
## n_Not Wrong At All = 7271, mean_Not Wrong At All = 14.1199, sd_Not Wrong At All = 2.8957
## n_Always Wrong = 21542, mean_Always Wrong = 12.0381, sd_Always Wrong = 3.0965&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Observed difference between means (Not Wrong At All-Always Wrong) = 2.0818
## H0: mu_Not Wrong At All - mu_Always Wrong = 0 
## HA: mu_Not Wrong At All - mu_Always Wrong &amp;gt; 0 
## Standard error = 0.04 
## Test statistic: Z =  52.072 
## p-value =  0&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/201410_p-value_same_sex_and_education_analysis_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;conclusion&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;The test statistic is larger than 52, and hence is over 52 standard deviations away from the mean. From this I can conclude that the p-value must be very small if not 0. As the inference function calculates the p-value as 0, which is smaller than the set significance level (0.05), I reject the null hypothesis in favor of the alternative hypothesis.&lt;/p&gt;
&lt;p&gt;The data and the inference show that there is convincing evidence that indeed on average, US citizen that find homosexual relationships &lt;em&gt;Not Wrong At All&lt;/em&gt; have more years of education than US citizen that find homosexual relationships &lt;em&gt;Always Wrong&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;In this project I investigated the following question: “&lt;em&gt;Is there a relationship between strong opinions on same sex relationships and years of education?&lt;/em&gt;”. The data and the inference test confirmed a relationship between respondents’ strong views on same sex relationships and years of education. Respondents who view same sex relationships as &lt;em&gt;Not Wrong At All&lt;/em&gt; have, on average, 14.12 years of education and respondents who view same sex relationships as &lt;em&gt;Always Wrong&lt;/em&gt; have, on average, 12.04 years of education.&lt;/p&gt;
&lt;/div&gt;


&lt;!-- BLOGDOWN-HEAD




/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
  </channel>
</rss>